:root{
  --bg:#0b1220;
  --card:#111a2e;
  --muted:#8aa0c7;
  --text:#e8f0ff;
  --border:rgba(255,255,255,.10);
  --primary:#4f8cff;
  --danger:#ff5c5c;
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Noto Sans CJK SC",sans-serif;
  background:linear-gradient(180deg,#091026,#070b16);
  color:var(--text);
}

.app{min-height:100%;}

.topbar{
  position:sticky;
  top:0;
  z-index:10;
  padding:12px 12px calc(12px + env(safe-area-inset-top));
  background:rgba(10,16,32,.92);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.brand{font-weight:700;letter-spacing:.3px;}
.topbar-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;}

.stack{padding:12px;display:flex;flex-direction:column;gap:12px;}

.card{
  background:rgba(17,26,46,.9);
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
}

.section-title{font-weight:700;margin-bottom:8px;}

.muted{color:var(--muted);font-size:12px;}
.title{font-weight:700;font-size:16px;}

.divider{height:1px;background:var(--border);margin:10px 0;}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
@media(max-width:420px){.grid{grid-template-columns:1fr;}}

.row{display:flex;gap:10px;flex-wrap:wrap;}

.field{display:flex;flex-direction:column;gap:6px;margin:8px 0;}
.label{font-size:12px;color:var(--muted);}

.input,.textarea,select{
  width:100%;
  background:rgba(0,0,0,.25);
  border:1px solid var(--border);
  color:var(--text);
  border-radius:12px;
  padding:12px;
  font-size:16px;
  outline:none;
}
.textarea{min-height:120px;resize:vertical;}

.check{display:flex;gap:10px;align-items:center;margin:10px 0;}
.check input{transform:scale(1.15);}

.btn{
  border:1px solid var(--border);
  background:rgba(255,255,255,.08);
  color:var(--text);
  border-radius:12px;
  padding:12px 14px;
  font-size:15px;
}
.btn:active{transform:scale(.99);}
.btn-primary{background:rgba(79,140,255,.25);border-color:rgba(79,140,255,.45);}
.btn-secondary{background:rgba(255,255,255,.08);}
.btn-danger{background:rgba(255,92,92,.20);border-color:rgba(255,92,92,.45);}

.file-label{position:relative;overflow:hidden;}
.file-label input{position:absolute;inset:0;opacity:0;}

.list-toolbar{display:flex;flex-direction:column;gap:8px;margin-bottom:10px;}
.toolbar-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
.page-info{color:var(--muted);font-size:12px;}

.qa-list{display:flex;flex-direction:column;gap:10px;}
.qa-item{border:1px solid var(--border);border-radius:12px;padding:10px;background:rgba(0,0,0,.15);}
.qa-item.active{outline:2px solid rgba(79,140,255,.45);}
.qa-item-row{display:flex;gap:10px;align-items:flex-start;}
.qa-check{margin-top:4px;transform:scale(1.15);}
.qa-item-main{flex:1;min-width:0;}
.qa-item-main .q{font-weight:700;}
.qa-item-main .a{color:var(--muted);font-size:12px;margin-top:4px;line-height:1.35;}

.player-bar{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0;}
.status{padding:10px;border-radius:12px;background:rgba(0,0,0,.18);border:1px solid var(--border);}

.qa-view{display:flex;flex-direction:column;gap:10px;}
.qa-block{border:1px solid var(--border);border-radius:12px;padding:10px;background:rgba(0,0,0,.14);}
.block-title{font-weight:700;margin-bottom:8px;}
.block-body{color:rgba(232,240,255,.95);line-height:1.55;}

.block-title-row{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;}
.mini-actions{display:flex;gap:8px;flex-wrap:wrap;}

.answer{line-height:1.7;}
.sentence{display:inline;}
.sentence.active{background:rgba(79,140,255,.22);border-radius:6px;padding:2px 3px;}
.sentence.hit{background:rgba(50,205,140,.20);border-radius:6px;padding:2px 3px;}
.sentence.miss{background:rgba(255,92,92,.16);border-radius:6px;padding:2px 3px;}
.segment{border-bottom:1px dashed rgba(255,255,255,.18);}
.segment.masked{color:transparent;text-shadow:0 0 10px rgba(232,240,255,.35);}

.summary{padding:10px;border-radius:12px;background:rgba(0,0,0,.18);border:1px solid var(--border);color:var(--muted);}
.hint{margin-top:8px;color:var(--muted);font-size:12px;}

.rt-toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px;}
.rich-editor{
  min-height:160px;
  background:rgba(0,0,0,.22);
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  font-size:16px;
  line-height:1.6;
  outline:none;
}
.rich-editor:empty:before{content:attr(data-placeholder);color:rgba(138,160,199,.7);}

.rich-editor mark{background:rgba(255,230,0,.35);color:inherit;padding:0 2px;border-radius:4px;}

.assistant{margin-top:10px;white-space:pre-wrap;color:rgba(232,240,255,.92);}
